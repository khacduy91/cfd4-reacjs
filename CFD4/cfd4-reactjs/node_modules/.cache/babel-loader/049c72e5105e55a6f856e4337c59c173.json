{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nlet patternEmail = /^\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$/;\nlet patternURL = /^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\/\\/)?[a-z0-9]+([.]{1}[a-z0-9]+)*\\.[a-z]{2,5}(:[0-9]{1,5})?(\\/.*)?$/g;\nlet patternPhone = /\\(?([0-9]{3})\\)?([ .-]?)([0-9]{3})\\2([0-9]{4})/;\nlet patternWebsite = /\\2323/;\nexport default function useFormValidate(initialValue, validate) {\n  _s();\n\n  let [form, setForm] = useState(initialValue);\n\n  function inputChange(event) {\n    setForm({ ...form,\n      [event.target.getAttribute(\"name\")]: event.target.value\n    });\n  }\n\n  let [error, setError] = useState({});\n\n  function submit() {\n    document.querySelectorAll(\".error-input\").forEach(e => e.classList.remove(\"error-input\"));\n    let {\n      rule,\n      message\n    } = validate;\n    let errorObject = {};\n\n    for (let i in rule) {\n      var _form$i, _form$i2;\n\n      let r = rule[i];\n\n      if (r.required) {\n        if (!form[i]) {\n          var _message$i;\n\n          errorObject[i] = (message === null || message === void 0 ? void 0 : (_message$i = message[i]) === null || _message$i === void 0 ? void 0 : _message$i.required) || \"Trường này không được để trống\";\n          continue;\n        }\n      }\n\n      if (r.pattern) {\n        let pattern = r.pattern;\n        if (pattern === \"email\") pattern = patternEmail;\n        if (pattern === \"phone\") pattern = patternPhone;\n        if (pattern === \"url\") pattern = patternURL;\n        if (pattern === \"website\") pattern = patternWebsite;\n\n        if (!pattern.test(form[i])) {\n          var _message$i2;\n\n          errorObject[i] = (message === null || message === void 0 ? void 0 : (_message$i2 = message[i]) === null || _message$i2 === void 0 ? void 0 : _message$i2.pattern) || \"Trường này không đúng định dạng yêu cầu\";\n        }\n      }\n\n      if (r.min && ((_form$i = form[i]) === null || _form$i === void 0 ? void 0 : _form$i.length) < r.min) {\n        var _message$i3;\n\n        errorObject[i] = (message === null || message === void 0 ? void 0 : (_message$i3 = message[i]) === null || _message$i3 === void 0 ? void 0 : _message$i3.min) || `Trường này phải dài hơn ${r.min} kí tự`;\n      }\n\n      if (r.max && ((_form$i2 = form[i]) === null || _form$i2 === void 0 ? void 0 : _form$i2.length) > r.max) {\n        var _message$i4;\n\n        errorObject[i] = (message === null || message === void 0 ? void 0 : (_message$i4 = message[i]) === null || _message$i4 === void 0 ? void 0 : _message$i4.max) || `Trường này không được dài hơn ${r.max} kí tự`;\n      }\n    }\n\n    for (let i in errorObject) {\n      document.querySelector(`[name=\"${i}\"]`).classList.add(\"error-input\");\n    }\n\n    setError(errorObject);\n    return errorObject;\n  }\n\n  return {\n    form,\n    inputChange,\n    error,\n    submit\n  };\n}\n\n_s(useFormValidate, \"wZ+NvFkU3prq5xecWlaqGwYJEHI=\");","map":{"version":3,"sources":["/Users/inmac/Desktop/React Project/CFD4/cfd4-reactjs/src/hook/useFormValidate.jsx"],"names":["useState","patternEmail","patternURL","patternPhone","patternWebsite","useFormValidate","initialValue","validate","form","setForm","inputChange","event","target","getAttribute","value","error","setError","submit","document","querySelectorAll","forEach","e","classList","remove","rule","message","errorObject","i","r","required","pattern","test","min","length","max","querySelector","add"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\n\nlet patternEmail = /^\\w+@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$/;\nlet patternURL = /^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\/\\/)?[a-z0-9]+([.]{1}[a-z0-9]+)*\\.[a-z]{2,5}(:[0-9]{1,5})?(\\/.*)?$/g;\nlet patternPhone = /\\(?([0-9]{3})\\)?([ .-]?)([0-9]{3})\\2([0-9]{4})/;\nlet patternWebsite = /\\2323/;\n\nexport default function useFormValidate(initialValue, validate) {\n  let [form, setForm] = useState(initialValue);\n\n  function inputChange(event) {\n    setForm({\n      ...form,\n      [event.target.getAttribute(\"name\")]: event.target.value,\n    });\n  }\n  let [error, setError] = useState({});\n\n  function submit() {\n    document\n      .querySelectorAll(\".error-input\")\n      .forEach((e) => e.classList.remove(\"error-input\"));\n    let { rule, message } = validate;\n\n    let errorObject = {};\n\n    for (let i in rule) {\n      let r = rule[i];\n\n      if (r.required) {\n        if (!form[i]) {\n          errorObject[i] =\n            message?.[i]?.required || \"Trường này không được để trống\";\n          continue;\n        }\n      }\n\n      if (r.pattern) {\n        let pattern = r.pattern;\n        if (pattern === \"email\") pattern = patternEmail;\n        if (pattern === \"phone\") pattern = patternPhone;\n        if (pattern === \"url\") pattern = patternURL;\n        if (pattern === \"website\") pattern = patternWebsite;\n\n        if (!pattern.test(form[i])) {\n          errorObject[i] =\n            message?.[i]?.pattern || \"Trường này không đúng định dạng yêu cầu\";\n        }\n      }\n\n      if (r.min && form[i]?.length < r.min) {\n        errorObject[i] =\n          message?.[i]?.min || `Trường này phải dài hơn ${r.min} kí tự`;\n      }\n\n      if (r.max && form[i]?.length > r.max) {\n        errorObject[i] =\n          message?.[i]?.max || `Trường này không được dài hơn ${r.max} kí tự`;\n      }\n    }\n\n    for (let i in errorObject) {\n      document.querySelector(`[name=\"${i}\"]`).classList.add(\"error-input\");\n    }\n    setError(errorObject);\n    return errorObject;\n  }\n\n  return {\n    form,\n    inputChange,\n    error,\n    submit,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}